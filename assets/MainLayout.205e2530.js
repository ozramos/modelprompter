import{f as H,g as v,h as C,i as X,r as w,j as Dt,o as me,k as he,n as dt,l as fe,m as Z,p as te,q as ct,s as ae,t as Ie,w as V,u as Ot,v as ta,x as aa,y as na,z as Ce,H as gt,A as G,B as la,C as oa,D as ia,E as Be,F as Ke,G as pt,I as Ye,J as rt,K as Xe,L as ra,M as bt,N as Mt,O as sa,P as Le,Q as ua,R as It,S as da,T as ca,U as yt,V as fa,X as Qe,Y as Re,Z as D,_ as U,$ as g,a0 as M,a1 as m,a2 as De,a3 as ne,a4 as I,a5 as Q,a6 as va,a7 as ma,a8 as pe,a9 as st,aa as ve,ab as Qt,ac as wt,ad as Je,ae as ha,af as ga}from"./index.4fd47e10.js";import{u as Se,a as $e,g as Rt,b as At,h as pa,c as ba,d as Ft,e as Ht,f as Ut,i as Nt,j as ya,k as Ge,l as wa,m as _a,n as ka,o as xa,p as Ca,r as _t,q as kt,s as qa,t as Sa,Q as xe,v as ue,w as $a,x as Ta,y as Oe,z as Ea}from"./QInput.4c59713d.js";import{s as L,l as ft}from"./db.97754226.js";var Ba=H({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:n}){const a=v(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>C("div",{class:a.value},X(n.default))}}),La=H({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:n}){const a=v(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>C("div",{class:a.value,role:"toolbar"},X(n.default))}});function Va(){const e=w(!Dt.value);return e.value===!1&&me(()=>{e.value=!0}),e}const Wt=typeof ResizeObserver<"u",xt=Wt===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var ut=H({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:n}){let a=null,o,t={width:-1,height:-1};function l(f){f===!0||e.debounce===0||e.debounce==="0"?s():a===null&&(a=setTimeout(s,e.debounce))}function s(){if(a!==null&&(clearTimeout(a),a=null),o){const{offsetWidth:f,offsetHeight:r}=o;(f!==t.width||r!==t.height)&&(t={width:f,height:r},n("resize",t))}}const{proxy:h}=Z();if(Wt===!0){let f;const r=i=>{o=h.$el.parentNode,o?(f=new ResizeObserver(l),f.observe(o),s()):i!==!0&&fe(()=>{r(!0)})};return me(()=>{r()}),he(()=>{a!==null&&clearTimeout(a),f!==void 0&&(f.disconnect!==void 0?f.disconnect():o&&f.unobserve(o))}),dt}else{let i=function(){a!==null&&(clearTimeout(a),a=null),r!==void 0&&(r.removeEventListener!==void 0&&r.removeEventListener("resize",l,te.passive),r=void 0)},p=function(){i(),o&&o.contentDocument&&(r=o.contentDocument.defaultView,r.addEventListener("resize",l,te.passive),s())};const f=Va();let r;return me(()=>{fe(()=>{o=h.$el,o&&p()})}),he(i),h.trigger=l,()=>{if(f.value===!0)return C("object",{style:xt.style,tabindex:-1,type:"text/html",data:xt.url,"aria-hidden":"true",onLoad:p})}}}}),za=H({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:n,emit:a}){const{proxy:{$q:o}}=Z(),t=ct(Ie,ae);if(t===ae)return console.error("QHeader needs to be child of QLayout"),ae;const l=w(parseInt(e.heightHint,10)),s=w(!0),h=v(()=>e.reveal===!0||t.view.value.indexOf("H")>-1||o.platform.is.ios&&t.isContainer.value===!0),f=v(()=>{if(e.modelValue!==!0)return 0;if(h.value===!0)return s.value===!0?l.value:0;const b=l.value-t.scroll.value.position;return b>0?b:0}),r=v(()=>e.modelValue!==!0||h.value===!0&&s.value!==!0),i=v(()=>e.modelValue===!0&&r.value===!0&&e.reveal===!0),p=v(()=>"q-header q-layout__section--marginal "+(h.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(r.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),_=v(()=>{const b=t.rows.value.top,k={};return b[0]==="l"&&t.left.space===!0&&(k[o.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),b[2]==="r"&&t.right.space===!0&&(k[o.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),k});function u(b,k){t.update("header",b,k)}function d(b,k){b.value!==k&&(b.value=k)}function y({height:b}){d(l,b),u("size",b)}function $(b){i.value===!0&&d(s,!0),a("focusin",b)}V(()=>e.modelValue,b=>{u("space",b),d(s,!0),t.animate()}),V(f,b=>{u("offset",b)}),V(()=>e.reveal,b=>{b===!1&&d(s,e.modelValue)}),V(s,b=>{t.animate(),a("reveal",b)}),V(t.scroll,b=>{e.reveal===!0&&d(s,b.direction==="up"||b.position<=e.revealOffset||b.position-b.inflectionPoint<100)});const T={};return t.instances.header=T,e.modelValue===!0&&u("size",l.value),u("space",e.modelValue),u("offset",f.value),he(()=>{t.instances.header===T&&(t.instances.header=void 0,u("size",0),u("offset",0),u("space",!1))}),()=>{const b=Ot(n.default,[]);return e.elevated===!0&&b.push(C("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),b.push(C(ut,{debounce:0,onResize:y})),C("header",{class:p.value,style:_.value,onFocusin:$},b)}}}),Ze=H({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:n}){const a=v(()=>parseInt(e.lines,10)),o=v(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(a.value===1?" ellipsis":"")),t=v(()=>e.lines!==void 0&&a.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":a.value}:null);return()=>C("div",{style:t.value,class:o.value},X(n.default))}}),et=H({name:"QList",props:{...Se,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:n}){const a=Z(),o=$e(e,a.proxy.$q),t=v(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(o.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>C(e.tag,{class:t.value},X(n.default))}}),tt=H({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:n}){const a=v(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>C("div",{class:a.value},X(n.default))}}),Ct=H({name:"QItem",props:{...Se,...ta,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:n,emit:a}){const{proxy:{$q:o}}=Z(),t=$e(e,o),{hasLink:l,linkAttrs:s,linkClass:h,linkTag:f,navigateOnClick:r}=aa(),i=w(null),p=w(null),_=v(()=>e.clickable===!0||l.value===!0||e.tag==="label"),u=v(()=>e.disable!==!0&&_.value===!0),d=v(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(t.value===!0?" q-item--dark":"")+(l.value===!0&&e.active===null?h.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(u.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),y=v(()=>{if(e.insetLevel===void 0)return null;const k=o.lang.rtl===!0?"Right":"Left";return{["padding"+k]:16+e.insetLevel*56+"px"}});function $(k){u.value===!0&&(p.value!==null&&(k.qKeyEvent!==!0&&document.activeElement===i.value?p.value.focus():document.activeElement===p.value&&i.value.focus()),r(k))}function T(k){if(u.value===!0&&na(k,13)===!0){Ce(k),k.qKeyEvent=!0;const x=new MouseEvent("click",k);x.qKeyEvent=!0,i.value.dispatchEvent(x)}a("keyup",k)}function b(){const k=Ot(n.default,[]);return u.value===!0&&k.unshift(C("div",{class:"q-focus-helper",tabindex:-1,ref:p})),k}return()=>{const k={ref:i,class:d.value,style:y.value,role:"listitem",onClick:$,onKeyup:T};return u.value===!0?(k.tabindex=e.tabindex||"0",Object.assign(k,s.value)):_.value===!0&&(k["aria-disabled"]="true"),C(f.value,k,b())}}});function jt(e,n,a){let o;function t(){o!==void 0&&(gt.remove(o),o=void 0)}return he(()=>{e.value===!0&&t()}),{removeFromHistory:t,addToHistory(){o={condition:()=>a.value===!0,handler:n},gt.add(o)}}}let _e=0,at,nt,ke,lt=!1,qt,St,$t,ce=null;function Pa(e){Da(e)&&Ce(e)}function Da(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const n=la(e),a=e.shiftKey&&!e.deltaX,o=!a&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),t=a||o?e.deltaY:e.deltaX;for(let l=0;l<n.length;l++){const s=n[l];if(pa(s,o))return o?t<0&&s.scrollTop===0?!0:t>0&&s.scrollTop+s.clientHeight===s.scrollHeight:t<0&&s.scrollLeft===0?!0:t>0&&s.scrollLeft+s.clientWidth===s.scrollWidth}return!0}function Tt(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Ve(e){lt!==!0&&(lt=!0,requestAnimationFrame(()=>{lt=!1;const{height:n}=e.target,{clientHeight:a,scrollTop:o}=document.scrollingElement;(ke===void 0||n!==window.innerHeight)&&(ke=a-n,document.scrollingElement.scrollTop=o),o>ke&&(document.scrollingElement.scrollTop-=Math.ceil((o-ke)/8))}))}function Et(e){const n=document.body,a=window.visualViewport!==void 0;if(e==="add"){const{overflowY:o,overflowX:t}=window.getComputedStyle(n);at=Rt(window),nt=At(window),qt=n.style.left,St=n.style.top,$t=window.location.href,n.style.left=`-${at}px`,n.style.top=`-${nt}px`,t!=="hidden"&&(t==="scroll"||n.scrollWidth>window.innerWidth)&&n.classList.add("q-body--force-scrollbar-x"),o!=="hidden"&&(o==="scroll"||n.scrollHeight>window.innerHeight)&&n.classList.add("q-body--force-scrollbar-y"),n.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,G.is.ios===!0&&(a===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Ve,te.passiveCapture),window.visualViewport.addEventListener("scroll",Ve,te.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",Tt,te.passiveCapture))}G.is.desktop===!0&&G.is.mac===!0&&window[`${e}EventListener`]("wheel",Pa,te.notPassive),e==="remove"&&(G.is.ios===!0&&(a===!0?(window.visualViewport.removeEventListener("resize",Ve,te.passiveCapture),window.visualViewport.removeEventListener("scroll",Ve,te.passiveCapture)):window.removeEventListener("scroll",Tt,te.passiveCapture)),n.classList.remove("q-body--prevent-scroll"),n.classList.remove("q-body--force-scrollbar-x"),n.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,n.style.left=qt,n.style.top=St,window.location.href===$t&&window.scrollTo(at,nt),ke=void 0)}function Oa(e){let n="add";if(e===!0){if(_e++,ce!==null){clearTimeout(ce),ce=null;return}if(_e>1)return}else{if(_e===0||(_e--,_e>0))return;if(n="remove",G.is.ios===!0&&G.is.nativeMobile===!0){ce!==null&&clearTimeout(ce),ce=setTimeout(()=>{Et(n),ce=null},100);return}}Et(n)}function Kt(){let e;return{preventBodyScroll(n){n!==e&&(e!==void 0||n===!0)&&(e=n,Oa(n))}}}const vt={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ma=Object.keys(vt);vt.all=!0;function Bt(e){const n={};for(const a of Ma)e[a]===!0&&(n[a]=!0);return Object.keys(n).length===0?vt:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}function Lt(e,n){return n.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof n.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(n.uid)===-1)}function ot(e,n,a){const o=rt(e);let t,l=o.left-n.event.x,s=o.top-n.event.y,h=Math.abs(l),f=Math.abs(s);const r=n.direction;r.horizontal===!0&&r.vertical!==!0?t=l<0?"left":"right":r.horizontal!==!0&&r.vertical===!0?t=s<0?"up":"down":r.up===!0&&s<0?(t="up",h>f&&(r.left===!0&&l<0?t="left":r.right===!0&&l>0&&(t="right"))):r.down===!0&&s>0?(t="down",h>f&&(r.left===!0&&l<0?t="left":r.right===!0&&l>0&&(t="right"))):r.left===!0&&l<0?(t="left",h<f&&(r.up===!0&&s<0?t="up":r.down===!0&&s>0&&(t="down"))):r.right===!0&&l>0&&(t="right",h<f&&(r.up===!0&&s<0?t="up":r.down===!0&&s>0&&(t="down")));let i=!1;if(t===void 0&&a===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};t=n.event.lastDir,i=!0,t==="left"||t==="right"?(o.left-=l,h=0,l=0):(o.top-=s,f=0,s=0)}return{synthetic:i,payload:{evt:e,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:o,direction:t,isFirst:n.event.isFirst,isFinal:a===!0,duration:Date.now()-n.event.time,distance:{x:h,y:f},offset:{x:l,y:s},delta:{x:o.left-n.event.lastX,y:o.top-n.event.lastY}}}}let Ia=0;var it=oa({name:"touch-pan",beforeMount(e,{value:n,modifiers:a}){if(a.mouse!==!0&&G.has.touch!==!0)return;function o(l,s){a.mouse===!0&&s===!0?Ce(l):(a.stop===!0&&Ye(l),a.prevent===!0&&pt(l))}const t={uid:"qvtp_"+Ia++,handler:n,modifiers:a,direction:Bt(a),noop:dt,mouseStart(l){Lt(l,t)&&ia(l)&&(Be(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(l,!0))},touchStart(l){if(Lt(l,t)){const s=l.target;Be(t,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","passiveCapture"],[s,"touchend","end","passiveCapture"]]),t.start(l)}},start(l,s){if(G.is.firefox===!0&&Ke(e,!0),t.lastEvt=l,s===!0||a.stop===!0){if(t.direction.all!==!0&&(s!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const r=l.type.indexOf("mouse")>-1?new MouseEvent(l.type,l):new TouchEvent(l.type,l);l.defaultPrevented===!0&&pt(r),l.cancelBubble===!0&&Ye(r),Object.assign(r,{qKeyEvent:l.qKeyEvent,qClickOutside:l.qClickOutside,qAnchorHandled:l.qAnchorHandled,qClonedBy:l.qClonedBy===void 0?[t.uid]:l.qClonedBy.concat(t.uid)}),t.initialEvent={target:l.target,event:r}}Ye(l)}const{left:h,top:f}=rt(l);t.event={x:h,y:f,time:Date.now(),mouse:s===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:h,lastY:f}},move(l){if(t.event===void 0)return;const s=rt(l),h=s.left-t.event.x,f=s.top-t.event.y;if(h===0&&f===0)return;t.lastEvt=l;const r=t.event.mouse===!0,i=()=>{o(l,r);let u;a.preserveCursor!==!0&&a.preservecursor!==!0&&(u=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),r===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),ba(),t.styleCleanup=d=>{if(t.styleCleanup=void 0,u!==void 0&&(document.documentElement.style.cursor=u),document.body.classList.remove("non-selectable"),r===!0){const y=()=>{document.body.classList.remove("no-pointer-events--children")};d!==void 0?setTimeout(()=>{y(),d()},50):y()}else d!==void 0&&d()}};if(t.event.detected===!0){t.event.isFirst!==!0&&o(l,t.event.mouse);const{payload:u,synthetic:d}=ot(l,t,!1);u!==void 0&&(t.handler(u)===!1?t.end(l):(t.styleCleanup===void 0&&t.event.isFirst===!0&&i(),t.event.lastX=u.position.left,t.event.lastY=u.position.top,t.event.lastDir=d===!0?void 0:u.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||r===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){i(),t.event.detected=!0,t.move(l);return}const p=Math.abs(h),_=Math.abs(f);p!==_&&(t.direction.horizontal===!0&&p>_||t.direction.vertical===!0&&p<_||t.direction.up===!0&&p<_&&f<0||t.direction.down===!0&&p<_&&f>0||t.direction.left===!0&&p>_&&h<0||t.direction.right===!0&&p>_&&h>0?(t.event.detected=!0,t.move(l)):t.end(l,!0))},end(l,s){if(t.event!==void 0){if(Xe(t,"temp"),G.is.firefox===!0&&Ke(e,!1),s===!0)t.styleCleanup!==void 0&&t.styleCleanup(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(ot(l===void 0?t.lastEvt:l,t).payload);const{payload:h}=ot(l===void 0?t.lastEvt:l,t,!0),f=()=>{t.handler(h)};t.styleCleanup!==void 0?t.styleCleanup(f):f()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,a.mouse===!0){const l=a.mouseCapture===!0||a.mousecapture===!0?"Capture":"";Be(t,"main",[[e,"mousedown","mouseStart",`passive${l}`]])}G.has.touch===!0&&Be(t,"main",[[e,"touchstart","touchStart",`passive${a.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const a=e.__qtouchpan;a!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&a.end(),a.handler=n.value),a.direction=Bt(n.modifiers))},beforeUnmount(e){const n=e.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),Xe(n,"main"),Xe(n,"temp"),G.is.firefox===!0&&Ke(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete e.__qtouchpan)}});function ze(e,n,a){return a<=n?n:Math.min(a,Math.max(n,e))}const Vt=150;var Qa=H({name:"QDrawer",inheritAttrs:!1,props:{...Ft,...Se,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Ht,"onLayout","miniState"],setup(e,{slots:n,emit:a,attrs:o}){const t=Z(),{proxy:{$q:l}}=t,s=$e(e,l),{preventBodyScroll:h}=Kt(),{registerTimeout:f,removeTimeout:r}=Ut(),i=ct(Ie,ae);if(i===ae)return console.error("QDrawer needs to be child of QLayout"),ae;let p,_=null,u;const d=w(e.behavior==="mobile"||e.behavior!=="desktop"&&i.totalWidth.value<=e.breakpoint),y=v(()=>e.mini===!0&&d.value!==!0),$=v(()=>y.value===!0?e.miniWidth:e.width),T=w(e.showIfAbove===!0&&d.value===!1?!0:e.modelValue===!0),b=v(()=>e.persistent!==!0&&(d.value===!0||be.value===!0));function k(c,B){if(q(),c!==!1&&i.animate(),Y(0),d.value===!0){const K=i.instances[F.value];K!==void 0&&K.belowBreakpoint===!0&&K.hide(!1),re(1),i.isContainer.value!==!0&&h(!0)}else re(0),c!==!1&&Ne(!1);f(()=>{c!==!1&&Ne(!0),B!==!0&&a("show",c)},Vt)}function x(c,B){O(),c!==!1&&i.animate(),re(0),Y(j.value*$.value),We(),B!==!0?f(()=>{a("hide",c)},Vt):r()}const{show:P,hide:z}=Nt({showing:T,hideOnRouteChange:b,handleShow:k,handleHide:x}),{addToHistory:q,removeFromHistory:O}=jt(T,z,b),N={belowBreakpoint:d,hide:z},W=v(()=>e.side==="right"),j=v(()=>(l.lang.rtl===!0?-1:1)*(W.value===!0?1:-1)),S=w(0),R=w(!1),ee=w(!1),J=w($.value*j.value),F=v(()=>W.value===!0?"left":"right"),oe=v(()=>T.value===!0&&d.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:$.value:0),de=v(()=>e.overlay===!0||e.miniToOverlay===!0||i.view.value.indexOf(W.value?"R":"L")>-1||l.platform.is.ios===!0&&i.isContainer.value===!0),ie=v(()=>e.overlay===!1&&T.value===!0&&d.value===!1),be=v(()=>e.overlay===!0&&T.value===!0&&d.value===!1),Ae=v(()=>"fullscreen q-drawer__backdrop"+(T.value===!1&&R.value===!1?" hidden":"")),Fe=v(()=>({backgroundColor:`rgba(0,0,0,${S.value*.4})`})),ge=v(()=>W.value===!0?i.rows.value.top[2]==="r":i.rows.value.top[0]==="l"),He=v(()=>W.value===!0?i.rows.value.bottom[2]==="r":i.rows.value.bottom[0]==="l"),E=v(()=>{const c={};return i.header.space===!0&&ge.value===!1&&(de.value===!0?c.top=`${i.header.offset}px`:i.header.space===!0&&(c.top=`${i.header.size}px`)),i.footer.space===!0&&He.value===!1&&(de.value===!0?c.bottom=`${i.footer.offset}px`:i.footer.space===!0&&(c.bottom=`${i.footer.size}px`)),c}),A=v(()=>{const c={width:`${$.value}px`,transform:`translateX(${J.value}px)`};return d.value===!0?c:Object.assign(c,E.value)}),ye=v(()=>"q-drawer__content fit "+(i.isContainer.value!==!0?"scroll":"overflow-auto")),Te=v(()=>`q-drawer q-drawer--${e.side}`+(ee.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(s.value===!0?" q-drawer--dark q-dark":"")+(R.value===!0?" no-transition":T.value===!0?"":" q-layout--prevent-focus")+(d.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${y.value===!0?"mini":"standard"}`+(de.value===!0||ie.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(ge.value===!0?" q-drawer--top-padding":""))),we=v(()=>{const c=l.lang.rtl===!0?e.side:F.value;return[[it,Zt,void 0,{[c]:!0,mouse:!0}]]}),Xt=v(()=>{const c=l.lang.rtl===!0?F.value:e.side;return[[it,ht,void 0,{[c]:!0,mouse:!0}]]}),Jt=v(()=>{const c=l.lang.rtl===!0?F.value:e.side;return[[it,ht,void 0,{[c]:!0,mouse:!0,mouseAllDir:!0}]]});function Ue(){ea(d,e.behavior==="mobile"||e.behavior!=="desktop"&&i.totalWidth.value<=e.breakpoint)}V(d,c=>{c===!0?(p=T.value,T.value===!0&&z(!1)):e.overlay===!1&&e.behavior!=="mobile"&&p!==!1&&(T.value===!0?(Y(0),re(0),We()):P(!1))}),V(()=>e.side,(c,B)=>{i.instances[B]===N&&(i.instances[B]=void 0,i[B].space=!1,i[B].offset=0),i.instances[c]=N,i[c].size=$.value,i[c].space=ie.value,i[c].offset=oe.value}),V(i.totalWidth,()=>{(i.isContainer.value===!0||document.qScrollPrevented!==!0)&&Ue()}),V(()=>e.behavior+e.breakpoint,Ue),V(i.isContainer,c=>{T.value===!0&&h(c!==!0),c===!0&&Ue()}),V(i.scrollbarWidth,()=>{Y(T.value===!0?0:void 0)}),V(oe,c=>{se("offset",c)}),V(ie,c=>{a("onLayout",c),se("space",c)}),V(W,()=>{Y()}),V($,c=>{Y(),je(e.miniToOverlay,c)}),V(()=>e.miniToOverlay,c=>{je(c,$.value)}),V(()=>l.lang.rtl,()=>{Y()}),V(()=>e.mini,()=>{e.modelValue===!0&&(Gt(),i.animate())}),V(y,c=>{a("miniState",c)});function Y(c){c===void 0?fe(()=>{c=T.value===!0?0:$.value,Y(j.value*c)}):(i.isContainer.value===!0&&W.value===!0&&(d.value===!0||Math.abs(c)===$.value)&&(c+=j.value*i.scrollbarWidth.value),J.value=c)}function re(c){S.value=c}function Ne(c){const B=c===!0?"remove":i.isContainer.value!==!0?"add":"";B!==""&&document.body.classList[B]("q-body--drawer-toggle")}function Gt(){_!==null&&clearTimeout(_),t.proxy&&t.proxy.$el&&t.proxy.$el.classList.add("q-drawer--mini-animate"),ee.value=!0,_=setTimeout(()=>{_=null,ee.value=!1,t&&t.proxy&&t.proxy.$el&&t.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function Zt(c){if(T.value!==!1)return;const B=$.value,K=ze(c.distance.x,0,B);if(c.isFinal===!0){K>=Math.min(75,B)===!0?P():(i.animate(),re(0),Y(j.value*B)),R.value=!1;return}Y((l.lang.rtl===!0?W.value!==!0:W.value)?Math.max(B-K,0):Math.min(0,K-B)),re(ze(K/B,0,1)),c.isFirst===!0&&(R.value=!0)}function ht(c){if(T.value!==!0)return;const B=$.value,K=c.direction===e.side,Ee=(l.lang.rtl===!0?K!==!0:K)?ze(c.distance.x,0,B):0;if(c.isFinal===!0){Math.abs(Ee)<Math.min(75,B)===!0?(i.animate(),re(1),Y(0)):z(),R.value=!1;return}Y(j.value*Ee),re(ze(1-Ee/B,0,1)),c.isFirst===!0&&(R.value=!0)}function We(){h(!1),Ne(!0)}function se(c,B){i.update(e.side,c,B)}function ea(c,B){c.value!==B&&(c.value=B)}function je(c,B){se("size",c===!0?e.miniWidth:B)}return i.instances[e.side]=N,je(e.miniToOverlay,$.value),se("space",ie.value),se("offset",oe.value),e.showIfAbove===!0&&e.modelValue!==!0&&T.value===!0&&e["onUpdate:modelValue"]!==void 0&&a("update:modelValue",!0),me(()=>{a("onLayout",ie.value),a("miniState",y.value),p=e.showIfAbove===!0;const c=()=>{(T.value===!0?k:x)(!1,!0)};if(i.totalWidth.value!==0){fe(c);return}u=V(i.totalWidth,()=>{u(),u=void 0,T.value===!1&&e.showIfAbove===!0&&d.value===!1?P(!1):c()})}),he(()=>{u!==void 0&&u(),_!==null&&(clearTimeout(_),_=null),T.value===!0&&We(),i.instances[e.side]===N&&(i.instances[e.side]=void 0,se("size",0),se("offset",0),se("space",!1))}),()=>{const c=[];d.value===!0&&(e.noSwipeOpen===!1&&c.push(ra(C("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),we.value)),c.push(bt("div",{ref:"backdrop",class:Ae.value,style:Fe.value,"aria-hidden":"true",onClick:z},void 0,"backdrop",e.noSwipeBackdrop!==!0&&T.value===!0,()=>Jt.value)));const B=y.value===!0&&n.mini!==void 0,K=[C("div",{...o,key:""+B,class:[ye.value,o.class]},B===!0?n.mini():X(n.default))];return e.elevated===!0&&T.value===!0&&K.push(C("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),c.push(bt("aside",{ref:"content",class:Te.value,style:A.value},K,"contentclose",e.noSwipeClose!==!0&&d.value===!0,()=>Xt.value)),C("div",{class:"q-drawer-container"},c)}}}),Ra=H({name:"QPageContainer",setup(e,{slots:n}){const{proxy:{$q:a}}=Z(),o=ct(Ie,ae);if(o===ae)return console.error("QPageContainer needs to be child of QLayout"),ae;Mt(sa,!0);const t=v(()=>{const l={};return o.header.space===!0&&(l.paddingTop=`${o.header.size}px`),o.right.space===!0&&(l[`padding${a.lang.rtl===!0?"Left":"Right"}`]=`${o.right.size}px`),o.footer.space===!0&&(l.paddingBottom=`${o.footer.size}px`),o.left.space===!0&&(l[`padding${a.lang.rtl===!0?"Right":"Left"}`]=`${o.left.size}px`),l});return()=>C("div",{class:"q-page-container",style:t.value},X(n.default))}});const{passive:zt}=te,Aa=["both","horizontal","vertical"];var Fa=H({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Aa.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:n}){const a={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let o=null,t,l;V(()=>e.scrollTarget,()=>{f(),h()});function s(){o!==null&&o();const p=Math.max(0,At(t)),_=Rt(t),u={top:p-a.position.top,left:_-a.position.left};if(e.axis==="vertical"&&u.top===0||e.axis==="horizontal"&&u.left===0)return;const d=Math.abs(u.top)>=Math.abs(u.left)?u.top<0?"up":"down":u.left<0?"left":"right";a.position={top:p,left:_},a.directionChanged=a.direction!==d,a.delta=u,a.directionChanged===!0&&(a.direction=d,a.inflectionPoint=a.position),n("scroll",{...a})}function h(){t=ya(l,e.scrollTarget),t.addEventListener("scroll",r,zt),r(!0)}function f(){t!==void 0&&(t.removeEventListener("scroll",r,zt),t=void 0)}function r(p){if(p===!0||e.debounce===0||e.debounce==="0")s();else if(o===null){const[_,u]=e.debounce?[setTimeout(s,e.debounce),clearTimeout]:[requestAnimationFrame(s),cancelAnimationFrame];o=()=>{u(_),o=null}}}const{proxy:i}=Z();return V(()=>i.$q.lang.rtl,s),me(()=>{l=i.$el.parentNode,h()}),he(()=>{o!==null&&o(),f()}),Object.assign(i,{trigger:r,getPosition:()=>a}),dt}}),Ha=H({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:n,emit:a}){const{proxy:{$q:o}}=Z(),t=w(null),l=w(o.screen.height),s=w(e.container===!0?0:o.screen.width),h=w({position:0,direction:"down",inflectionPoint:0}),f=w(0),r=w(Dt.value===!0?0:Ge()),i=v(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),p=v(()=>e.container===!1?{minHeight:o.screen.height+"px"}:null),_=v(()=>r.value!==0?{[o.lang.rtl===!0?"left":"right"]:`${r.value}px`}:null),u=v(()=>r.value!==0?{[o.lang.rtl===!0?"right":"left"]:0,[o.lang.rtl===!0?"left":"right"]:`-${r.value}px`,width:`calc(100% + ${r.value}px)`}:null);function d(x){if(e.container===!0||document.qScrollPrevented!==!0){const P={position:x.position.top,direction:x.direction,directionChanged:x.directionChanged,inflectionPoint:x.inflectionPoint.top,delta:x.delta.top};h.value=P,e.onScroll!==void 0&&a("scroll",P)}}function y(x){const{height:P,width:z}=x;let q=!1;l.value!==P&&(q=!0,l.value=P,e.onScrollHeight!==void 0&&a("scrollHeight",P),T()),s.value!==z&&(q=!0,s.value=z),q===!0&&e.onResize!==void 0&&a("resize",x)}function $({height:x}){f.value!==x&&(f.value=x,T())}function T(){if(e.container===!0){const x=l.value>f.value?Ge():0;r.value!==x&&(r.value=x)}}let b=null;const k={instances:{},view:v(()=>e.view),isContainer:v(()=>e.container),rootRef:t,height:l,containerHeight:f,scrollbarWidth:r,totalWidth:v(()=>s.value+r.value),rows:v(()=>{const x=e.view.toLowerCase().split(" ");return{top:x[0].split(""),middle:x[1].split(""),bottom:x[2].split("")}}),header:Le({size:0,offset:0,space:!1}),right:Le({size:300,offset:0,space:!1}),footer:Le({size:0,offset:0,space:!1}),left:Le({size:300,offset:0,space:!1}),scroll:h,animate(){b!==null?clearTimeout(b):document.body.classList.add("q-body--layout-animate"),b=setTimeout(()=>{b=null,document.body.classList.remove("q-body--layout-animate")},155)},update(x,P,z){k[x][P]=z}};if(Mt(Ie,k),Ge()>0){let z=function(){x=null,P.classList.remove("hide-scrollbar")},q=function(){if(x===null){if(P.scrollHeight>o.screen.height)return;P.classList.add("hide-scrollbar")}else clearTimeout(x);x=setTimeout(z,300)},O=function(N){x!==null&&N==="remove"&&(clearTimeout(x),z()),window[`${N}EventListener`]("resize",q)},x=null;const P=document.body;V(()=>e.container!==!0?"add":"remove",O),e.container!==!0&&O("add"),ua(()=>{O("remove")})}return()=>{const x=It(n.default,[C(Fa,{onScroll:d}),C(ut,{onResize:y})]),P=C("div",{class:i.value,style:p.value,ref:e.container===!0?void 0:t,tabindex:-1},x);return e.container===!0?C("div",{class:"q-layout-container overflow-hidden",ref:t},[C(ut,{onResize:$}),C("div",{class:"absolute-full",style:_.value},[C("div",{class:"scroll",style:u.value},[P])])]):P}}});const Ua="modelprompter",Na="0.0.1",Wa="Turn your desktop folders into unstructured databases and simulate entire communities of expert and autonomous AIs around them",ja="ModelPrompter",Ka="Oz Ramos <0xozram@gmail.com>",Ya={start:"quasar dev",dev:"quasar dev",build:"npx cross-env NODE_ENV=production quasar build",test:"npx cross-env NODE_ENV=production npm run build && npx http-server ./dist/spa -p 8000","cloud:export":"npx dexie-cloud export dexie-export.json"},Xa={"@quasar/extras":"^1.0.0","@vueuse/rxjs":"^10.1.2",dexie:"^4.0.1-alpha.10","dexie-cloud-addon":"^4.0.1-beta.40",dompurify:"^3.0.3",dotenv:"^16.0.3","dreambase-library":"^1.0.19","file-saver":"^2.0.5","highlight.js":"^11.8.0",langchain:"^0.0.69","markdown-it":"^13.0.1","monaco-editor":"^0.38.0","monaco-editor-vue3":"^0.1.6",pug:"^3.0.2",quasar:"^2.6.0",remove:"^0.1.5",vue:"^3.0.0","vue-router":"^4.0.0"},Ja={"@quasar/app-vite":"^1.0.0",autoprefixer:"^10.4.2","cross-env":"^7.0.3",postcss:"^8.4.14","vite-plugin-top-level-await":"^1.3.0","vite-plugin-wasm":"^3.2.2"},Ga={node:"^18 || ^16 || ^14.19",npm:">= 6.13.4",yarn:">= 1.21.1"};var Za={name:Ua,version:Na,description:Wa,productName:ja,author:Ka,private:!0,scripts:Ya,dependencies:Xa,devDependencies:Ja,engines:Ga},le=H({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:n}){const a=v(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>C(e.tag,{class:a.value},X(n.default))}}),qe=H({name:"QCardActions",props:{...da,vertical:Boolean},setup(e,{slots:n}){const a=ca(e),o=v(()=>`q-card__actions ${a.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>C("div",{class:o.value},X(n.default))}}),Me=H({name:"QCard",props:{...Se,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:n}){const{proxy:{$q:a}}=Z(),o=$e(e,a),t=v(()=>"q-card"+(o.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>C(e.tag,{class:t.value},X(n.default))}});let Pe=0;const en={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},Pt={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var mt=H({name:"QDialog",inheritAttrs:!1,props:{...Ft,...wa,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}},emits:[...Ht,"shake","click","escapeKey"],setup(e,{slots:n,emit:a,attrs:o}){const t=Z(),l=w(null),s=w(!1),h=w(!1);let f=null,r=null,i,p;const _=v(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:u}=Kt(),{registerTimeout:d}=Ut(),{registerTick:y,removeTick:$}=_a(),{transitionProps:T,transitionStyle:b}=ka(e,()=>Pt[e.position][0],()=>Pt[e.position][1]),{showPortal:k,hidePortal:x,portalIsAccessible:P,renderPortal:z}=xa(t,l,He,"dialog"),{hide:q}=Nt({showing:s,hideOnRouteChange:_,handleShow:ee,handleHide:J,processOnMount:!0}),{addToHistory:O,removeFromHistory:N}=jt(s,q,_),W=v(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${en[e.position]}`+(h.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),j=v(()=>s.value===!0&&e.seamless!==!0),S=v(()=>e.autoClose===!0?{onClick:Ae}:{}),R=v(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${j.value===!0?"modal":"seamless"}`,o.class]);V(()=>e.maximized,E=>{s.value===!0&&be(E)}),V(j,E=>{u(E),E===!0?(qa(ge),Sa(de)):(_t(ge),kt(de))});function ee(E){O(),r=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,be(e.maximized),k(),h.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),y(F)):$(),d(()=>{if(t.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:A,bottom:ye}=document.activeElement.getBoundingClientRect(),{innerHeight:Te}=window,we=window.visualViewport!==void 0?window.visualViewport.height:Te;A>0&&ye>we/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-we,ye>=Te?1/0:Math.ceil(document.scrollingElement.scrollTop+ye-we/2))),document.activeElement.scrollIntoView()}p=!0,l.value.click(),p=!1}k(!0),h.value=!1,a("show",E)},e.transitionDuration)}function J(E){$(),N(),ie(!0),h.value=!0,x(),r!==null&&(((E&&E.type.indexOf("key")===0?r.closest('[tabindex]:not([tabindex^="-"])'):void 0)||r).focus(),r=null),d(()=>{x(!0),h.value=!1,a("hide",E)},e.transitionDuration)}function F(E){Ca(()=>{let A=l.value;A===null||A.contains(document.activeElement)===!0||(A=(E!==""?A.querySelector(E):null)||A.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||A.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||A.querySelector("[autofocus], [data-autofocus]")||A,A.focus({preventScroll:!0}))})}function oe(E){E&&typeof E.focus=="function"?E.focus({preventScroll:!0}):F(),a("shake");const A=l.value;A!==null&&(A.classList.remove("q-animate--scale"),A.classList.add("q-animate--scale"),f!==null&&clearTimeout(f),f=setTimeout(()=>{f=null,l.value!==null&&(A.classList.remove("q-animate--scale"),F())},170))}function de(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&oe():(a("escapeKey"),q()))}function ie(E){f!==null&&(clearTimeout(f),f=null),(E===!0||s.value===!0)&&(be(!1),e.seamless!==!0&&(u(!1),_t(ge),kt(de))),E!==!0&&(r=null)}function be(E){E===!0?i!==!0&&(Pe<1&&document.body.classList.add("q-body--dialog"),Pe++,i=!0):i===!0&&(Pe<2&&document.body.classList.remove("q-body--dialog"),Pe--,i=!1)}function Ae(E){p!==!0&&(q(E),a("click",E))}function Fe(E){e.persistent!==!0&&e.noBackdropDismiss!==!0?q(E):e.noShake!==!0&&oe()}function ge(E){e.allowFocusOutside!==!0&&P.value===!0&&fa(l.value,E.target)!==!0&&F('[tabindex]:not([tabindex="-1"])')}Object.assign(t.proxy,{focus:F,shake:oe,__updateRefocusTarget(E){r=E||null}}),he(ie);function He(){return C("div",{role:"dialog","aria-modal":j.value===!0?"true":"false",...o,class:R.value},[C(yt,{name:"q-transition--fade",appear:!0},()=>j.value===!0?C("div",{class:"q-dialog__backdrop fixed-full",style:b.value,"aria-hidden":"true",tabindex:-1,onClick:Fe}):null),C(yt,T.value,()=>s.value===!0?C("div",{ref:l,class:W.value,style:b.value,tabindex:-1,...S.value},X(n.default)):null)])}return z}});const tn={key:0,class:"text-h4"},an={key:1,class:"text-h4"},nn=I("div",null,"Describe how this server should channel and the agents within it should behave.",-1),ln={__name:"NewChannel",setup(e,{expose:n}){const a=w(!1),o=w("Untitled"),t=w(""),l=Qe(),s=Re();let h=w(!1);const f=w(null);function r(u={}){a.value=!0,h.value=!!u.id||!1,f.value=u.id||null,u.id?(o.value=u.name,t.value=u.prompt):(o.value="Untitled",t.value="")}function i(){a.value=!1}async function p(){const u=await L.createChannel({name:o.value,prompt:t.value});await L.createMessage({name:"System",channel:"chnSystem",text:`<p><strong>Channel created</strong>: ${u.name}<p><strong>With prompt:</strong><pre>${u.prompt}</pre>`}),i(),l.notify({message:"Channel created"}),s.push({name:"channel",params:{id:u.id}})}async function _(){const u=await L.updateChannel({id:f.value,name:o.value,prompt:t.value});await L.createMessage({name:"System",channel:"chnSystem",text:`<p><strong>Channel updated</strong>: ${u.name}<p><strong>With prompt:</strong><pre>${u.prompt}</pre>`}),i(),l.notify({message:"Channel updated"}),s.push({name:"channel",params:{id:u.id}})}return n({showModal:r}),(u,d)=>(D(),U(Q,{class:"full-width q-pl-sm",icon:"chat",onClick:d[3]||(d[3]=y=>r())},{default:g(()=>[M("New Channel"),m(mt,{class:"fullscreen",modelValue:a.value,"onUpdate:modelValue":d[2]||(d[2]=y=>a.value=y)},{default:g(()=>[m(Me,{class:"flex column"},{default:g(()=>[m(le,{class:"flex-unset"},{default:g(()=>[De(h)?(D(),ne("div",tn,"Edit Channel")):(D(),ne("div",an,"New Channel"))]),_:1}),m(le,{class:"q-pb-none"},{default:g(()=>[I("p",null,[m(xe,{modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=y=>o.value=y),label:"Channel name",outlined:""},null,8,["modelValue"])]),nn]),_:1}),m(le,{class:"flex-auto align-stretch"},{default:g(()=>[m(xe,{class:"full-height flex-auto",modelValue:t.value,"onUpdate:modelValue":d[1]||(d[1]=y=>t.value=y),label:"Prompt",outlined:"",type:"textarea"},null,8,["modelValue"])]),_:1}),m(qe,{class:"flex-unset",align:"right"},{default:g(()=>[m(Q,{flat:"",onClick:i},{default:g(()=>[M("Cancel")]),_:1}),m(ue),De(h)?(D(),U(Q,{key:0,onClick:_},{default:g(()=>[M("Update channel")]),_:1})):(D(),U(Q,{key:1,onClick:p},{default:g(()=>[M("Create channel")]),_:1}))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};function on(e,n){const a=w(null),o=v(()=>e.disable===!0?null:C("span",{ref:a,class:"no-outline",tabindex:-1}));function t(l){const s=n.value;l!==void 0&&l.type.indexOf("key")===0?s!==null&&document.activeElement!==s&&s.contains(document.activeElement)===!0&&s.focus():a.value!==null&&(l===void 0||s!==null&&s.contains(l.target)===!0)&&a.value.focus()}return{refocusTargetEl:o,refocusTarget:t}}var rn={xs:30,sm:35,md:40,lg:50,xl:60};const sn={...Se,...ma,...$a,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},un=["update:modelValue"];function dn(e,n){const{props:a,slots:o,emit:t,proxy:l}=Z(),{$q:s}=l,h=$e(a,s),f=w(null),{refocusTargetEl:r,refocusTarget:i}=on(a,f),p=va(a,rn),_=v(()=>a.val!==void 0&&Array.isArray(a.modelValue)),u=v(()=>{const S=pe(a.val);return _.value===!0?a.modelValue.findIndex(R=>pe(R)===S):-1}),d=v(()=>_.value===!0?u.value>-1:pe(a.modelValue)===pe(a.trueValue)),y=v(()=>_.value===!0?u.value===-1:pe(a.modelValue)===pe(a.falseValue)),$=v(()=>d.value===!1&&y.value===!1),T=v(()=>a.disable===!0?-1:a.tabindex||0),b=v(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(a.disable===!0?" disabled":"")+(h.value===!0?` q-${e}--dark`:"")+(a.dense===!0?` q-${e}--dense`:"")+(a.leftLabel===!0?" reverse":"")),k=v(()=>{const S=d.value===!0?"truthy":y.value===!0?"falsy":"indet",R=a.color!==void 0&&(a.keepColor===!0||(e==="toggle"?d.value===!0:y.value!==!0))?` text-${a.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${S}${R}`}),x=v(()=>{const S={type:"checkbox"};return a.name!==void 0&&Object.assign(S,{".checked":d.value,"^checked":d.value===!0?"checked":void 0,name:a.name,value:_.value===!0?a.val:a.trueValue}),S}),P=Ta(x),z=v(()=>{const S={tabindex:T.value,role:e==="toggle"?"switch":"checkbox","aria-label":a.label,"aria-checked":$.value===!0?"mixed":d.value===!0?"true":"false"};return a.disable===!0&&(S["aria-disabled"]="true"),S});function q(S){S!==void 0&&(Ce(S),i(S)),a.disable!==!0&&t("update:modelValue",O(),S)}function O(){if(_.value===!0){if(d.value===!0){const S=a.modelValue.slice();return S.splice(u.value,1),S}return a.modelValue.concat([a.val])}if(d.value===!0){if(a.toggleOrder!=="ft"||a.toggleIndeterminate===!1)return a.falseValue}else if(y.value===!0){if(a.toggleOrder==="ft"||a.toggleIndeterminate===!1)return a.trueValue}else return a.toggleOrder!=="ft"?a.trueValue:a.falseValue;return a.indeterminateValue}function N(S){(S.keyCode===13||S.keyCode===32)&&Ce(S)}function W(S){(S.keyCode===13||S.keyCode===32)&&q(S)}const j=n(d,$);return Object.assign(l,{toggle:q}),()=>{const S=j();a.disable!==!0&&P(S,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const R=[C("div",{class:k.value,style:p.value,"aria-hidden":"true"},S)];r.value!==null&&R.push(r.value);const ee=a.label!==void 0?It(o.default,[a.label]):X(o.default);return ee!==void 0&&R.push(C("div",{class:`q-${e}__label q-anchor--skip`},ee)),C("div",{ref:f,class:b.value,...z.value,onClick:q,onKeydown:N,onKeyup:W},R)}}var cn=H({name:"QToggle",props:{...sn,icon:String,iconColor:String},emits:un,setup(e){function n(a,o){const t=v(()=>(a.value===!0?e.checkedIcon:o.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),l=v(()=>a.value===!0?e.iconColor:null);return()=>[C("div",{class:"q-toggle__track"}),C("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},t.value!==void 0?[C(st,{name:t.value,color:l.value})]:void 0)]}return dn("toggle",n)}});const fn=typeof Buffer<"u"?e=>ArrayBuffer.isView(e)?Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"):Buffer.from(e).toString("base64"):e=>btoa(String.fromCharCode.apply(null,ArrayBuffer.isView(e)?e:new Uint8Array(e))),vn=I("div",{class:"text-h4"},"Sign in",-1),mn={key:0},hn=I("strong",null,"Regsitration isn't required",-1),gn=I("a",{href:"https://dexie.org/cloud",target:"_blank"},"Dexie Cloud",-1),pn={key:1},bn=I("strong",{class:"text-red"},"Registration is closed.",-1),yn=I("a",{href:"https://dexie.org/cloud",target:"_blank"},"Dexie Cloud",-1),wn=I("div",{class:"text-h4"},"Enter OTP",-1),_n=I("p",null,"Check your email for an access token from Dexie.org (the cloud provider for this app) and enter the token below",-1),Yt={__name:"LoginLogout",setup(e){const n=Qe(),a=Re(),o=w(!1);w(!1);const t=w(!1),l=w(!1),s=w(""),h=w(null),f=w(""),r=w(""),i=w(null),p=w(!1),_=w(!1),u=!1,d=!!Number(void 0),y=w(!1),$=Oe(ft(()=>L.db.cloud.currentUser)||{});V($,()=>{y.value=L.db.cloud.currentUserId&&L.db.cloud.currentUserId!=="unauthorized",t.value&&y.value&&n.notify({message:"Logged in"})}),me(()=>{y.value=L.db.cloud.currentUserId&&L.db.cloud.currentUserId!=="unauthorized"});async function T(){await L.db.$logins.clear(),n.notify({message:"Logged out"}),window.indexedDB.databases().then(z=>{for(var q=0;q<z.length;q++)window.indexedDB.deleteDatabase(z[q].name)}),window.location.reload(),k()}async function b(){o.value=!0,l.value=!1,p.value=!1,t.value=!1,fe(()=>{setTimeout(()=>{h.value.focus()},10)})}function k(){o.value=!1}async function x(){if(!s.value){n.notify({message:"Please enter an email"});return}l.value=!1,p.value=!0,await fe(),setTimeout(async()=>{const z=await fetch(`${L.db.cloud.options.databaseUrl}/token`,{body:JSON.stringify({email:s.value,grant_type:"otp",scopes:["ACCESS_DB"]}),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});i.value=await z.json(),l.value=!0,p.value=!1,t.value=!0,n.notify({message:"Email sent"}),fe(()=>{f.value.focus()})},0)}async function P(){const z=function(J){const F=fn(J);return q(F)};function q(J){let F=`-----BEGIN PUBLIC KEY-----
`;for(;J.length>0;)F+=J.substring(0,64)+`
`,J=J.substring(64);return F=F+"-----END PUBLIC KEY-----",F}if(!crypto.subtle)throw typeof location<"u"&&location.protocol==="http:"?new Error("Dexie Cloud Addon needs to use WebCrypto, but your browser has disabled it due to being served from an insecure location. Please serve it from https or http://localhost:<port> (See https://stackoverflow.com/questions/46670556/how-to-enable-crypto-subtle-for-unsecure-origins-in-chrome/46671627#46671627)"):new Error("This browser does not support WebCrypto.");const{privateKey:O,publicKey:N}=await crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!1,["sign","verify"]);if(!O||!N)throw new Error("Could not generate RSA keypair");L.db.cloud.currentUser.nonExportablePrivateKey=O;const W=await crypto.subtle.exportKey("spki",N),j=z(W);L.db.cloud.currentUser.publicKey=N;const S=s.value==="public@demo.local",R=await fetch(`${L.db.cloud.options.databaseUrl}/token`,{body:JSON.stringify({email:s.value,otp:r.value,demo_user:S?"public@demo.local":void 0,otp_id:i.value.otp_id,grant_type:S?"demo":"otp",public_key:j,scopes:["ACCESS_DB"]}),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});if(R.status!==200){n.notify({message:"Invalid token",color:"negative"});return}const ee=await R.json();L.db.cloud.options.fetchTokens=()=>ee,await L.db.cloud.login({email:s.value,grant_type:"otp"}),k(),a.push("/")}return(z,q)=>(D(),ne(Qt,null,[d&&!y.value&&d&&u?(D(),U(Q,{key:0,onClick:q[5]||(q[5]=O=>b()),icon:"login"},{default:g(()=>[M("Sign in"),m(mt,{modelValue:o.value,"onUpdate:modelValue":q[4]||(q[4]=O=>o.value=O)},{default:g(()=>[l.value?(D(),U(Me,{key:1,style:{height:"auto !important","min-width":"350px","max-width":"600px !important",width:"auto !important"}},{default:g(()=>[m(le,null,{default:g(()=>[wn,_n,I("div",null,[m(xe,{ref_key:"$email",ref:h,modelValue:s.value,"onUpdate:modelValue":q[1]||(q[1]=O=>s.value=O),label:"Email",type:"email",disabled:p.value},null,8,["modelValue","disabled"])]),I("div",null,[m(xe,{ref_key:"$otpToken",ref:f,modelValue:r.value,"onUpdate:modelValue":q[2]||(q[2]=O=>r.value=O),label:"Enter OTP token"},null,8,["modelValue"])])]),_:1}),m(qe,{align:"right"},{default:g(()=>[m(Q,{flat:"",onClick:k},{default:g(()=>[M("Cancel")]),_:1}),m(ue),m(Q,{onClick:q[3]||(q[3]=O=>P()),disabled:!s.value||!r.value,loading:_.value},{default:g(()=>[M("Login")]),_:1},8,["disabled","loading"])]),_:1})]),_:1})):(D(),U(Me,{key:0,style:{height:"auto !important","min-width":"350px","max-width":"600px !important",width:"auto !important"}},{default:g(()=>[m(le,null,{default:g(()=>[vn]),_:1}),m(le,null,{default:g(()=>[z.allowRegistration?(D(),ne("p",mn,[hn,M(", but if you want to sync across devices or invite others, login below to get an access token emailed from "),gn,M(" (our data store provider)")])):(D(),ne("p",pn,[bn,M(" If you're in beta, sign in below to get an access token emailed from "),yn,M(" (our data store provider)")])),I("div",null,[m(xe,{ref_key:"$email",ref:h,modelValue:s.value,"onUpdate:modelValue":q[0]||(q[0]=O=>s.value=O),label:"Email",type:"email",disabled:p.value},null,8,["modelValue","disabled"])])]),_:1}),m(qe,{align:"right"},{default:g(()=>[m(Q,{flat:"",onClick:k},{default:g(()=>[M("Cancel")]),_:1}),m(ue),m(Q,{onClick:x,loading:p.value},{default:g(()=>[M("Email access token")]),_:1},8,["loading"])]),_:1})]),_:1}))]),_:1},8,["modelValue"])]),_:1})):ve("",!0),y.value&&d&&u?(D(),U(Q,{key:1,color:"negative",onClick:q[6]||(q[6]=O=>T()),icon:"logout"},{default:g(()=>[M("Sign out")]),_:1})):ve("",!0)],64))}},kn=I("div",{class:"text-h4"},"Settings",-1),xn=I("p",{class:"text-h6"},"Cloud sync",-1),Cn={key:0},qn={key:0},Sn={key:1},$n=I("p",{class:"text-h6"},"Local .json file",-1),Tn=I("label",{class:"q-btn bg-light text-white non-selectable no-outline q-btn--standard q-btn--rectangle q-btn--actionable q-focusable q-hoverable",for:"jsonFile",color:"light",style:{"line-height":"2.5em"}},"Import",-1),En={__name:"Settings",setup(e){const n=Qe(),a=Re(),o=w(!1),t=w(!1);w(null);const l=!!Number(void 0),s=w(!1),h=Oe(L.db?.cloud?.currentUser||{});V(h,()=>{s.value=L.db.cloud.currentUserId&&L.db.cloud.currentUserId!=="unauthorized"});function f(d={}){o.value=!0}function r(){o.value=!1}async function i(){await L.updateSettings({isCloudSyncEnabled:t.value}),n.notify({message:"Settings updated"}),r()}Oe(ft(async()=>await L.getSettings())),me(async()=>{const d=await L.getSettings();t.value=!!d.isCloudSyncEnabled});async function p(){await L.exportDatabase(),r(),n.notify({message:"Database exported"})}async function _(d){!d.target.files.length||(await L.importDatabase(d.target.files[0],n),a.push("/"),r())}async function u(){await L.deleteDatabase(),a.push("/"),r()}return(d,y)=>(D(),U(Q,{class:"full-width q-pl-sm q-pr-none",color:"light",icon:"settings",onClick:y[5]||(y[5]=$=>f())},{default:g(()=>[m(mt,{modelValue:o.value,"onUpdate:modelValue":y[4]||(y[4]=$=>o.value=$)},{default:g(()=>[m(Me,{style:{height:"auto !important","max-width":"100% !important",width:"500px !important"}},{default:g(()=>[d.connectedToCloud&&l?(D(),U(le,{key:0},{default:g(()=>[kn]),_:1})):ve("",!0),d.connectedToCloud&&l?(D(),U(le,{key:1},{default:g(()=>[xn,s.value?(D(),ne("p",Cn,[m(cn,{class:"q-mr-xl",modelValue:t.value,"onUpdate:modelValue":y[0]||(y[0]=$=>t.value=$),label:"Enable cloud sync",color:"primary"},null,8,["modelValue"]),t.value?(D(),ne("strong",qn,"(Syncing will start once you update)")):ve("",!0)])):(D(),ne("p",Sn,[m(Yt,null,{default:g(()=>[M("(Registration will be available soon)")]),_:1})]))]),_:1})):ve("",!0),m(le,null,{default:g(()=>[$n,m(qe,{class:"q-px-none"},{default:g(()=>[Tn,I("input",{class:"hidden",type:"file",id:"jsonFile",accept:".json",style:{display:"none"},onChange:y[1]||(y[1]=$=>_($))},null,32),m(Q,{class:"q-ml-md",onClick:y[2]||(y[2]=$=>p())},{default:g(()=>[M("Export")]),_:1})]),_:1})]),_:1}),m(qe,{class:"q-mt-xl",align:"right"},{default:g(()=>[m(Q,{flat:"",onClick:r},{default:g(()=>[M("Cancel")]),_:1}),m(ue),m(Q,{color:"negative",onClick:y[3]||(y[3]=$=>u())},{default:g(()=>[M("Delete all data")]),_:1}),m(ue),m(Q,{onClick:i},{default:g(()=>[M("Update Settings")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Bn=I("img",{class:"lt-md q-mr-sm",src:"/logo-title-small.png",height:"32",style:{"vertical-align":"middle"}},null,-1),Ln=I("img",{class:"gt-sm q-mr-sm",src:"/logo-title.png",height:"32",style:{"vertical-align":"middle"}},null,-1),Vn={href:"https://github.com/modelprompter/modelprompter/releases",target:"_blank"},zn={class:"q-ml-sm",style:{"font-size":".65em",display:"inline-block",transform:"translate(0, -3px)"}},Pn={class:"q-pr-sm"},Qn={__name:"MainLayout",setup(e){const n=Qe(),a=Re(),o=Oe(ft(async()=>{const r=await L.getChannels(),i=r.find(p=>p.id==="chnSystem");return i&&(r.splice(r.indexOf(i),1),r.unshift(i)),r})),t=w(!1);function l(){t.value=!t.value}const s=w(null);function h(r,i){return s.value.showModal(i),r.preventDefault(),r.stopPropagation(),!1}async function f(r,i){return await L.deleteChannel(i.id),await L.createMessage({name:"System",channel:"chnSystem",text:`<strong>Channel deleted</strong>: ${i.name}`}),n.notify({message:`Deleted channel ${i.name}`}),r.preventDefault(),r.stopPropagation(),a.push("/"),!1}return(r,i)=>{const p=wt("router-link"),_=wt("router-view");return D(),U(Ha,{view:"lHh Lpr lFf"},{default:g(()=>[m(za,null,{default:g(()=>[m(La,null,{default:g(()=>[m(Q,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:l}),m(Ba,null,{default:g(()=>[m(p,{class:"text-decoration-none text-white",to:"/"},{default:g(()=>[Bn,Ln]),_:1}),I("a",Vn,[I("small",zn,Je(De(Za).version),1)])]),_:1}),m(ue,{style:{"flex-grow":"0 !important"}}),m(Yt)]),_:1}),m(ue)]),_:1}),m(Qa,{class:"flex-drawer full-height width-inherit",modelValue:t.value,"onUpdate:modelValue":i[1]||(i[1]=u=>t.value=u),"show-if-above":"",bordered:""},{default:g(()=>[m(et,null,{default:g(()=>[m(Ze,{header:""},{default:g(()=>[M("Channels")]),_:1})]),_:1}),m(et,{style:{"overflow-y":"auto","overflow-x":"hidden"}},{default:g(()=>[(D(!0),ne(Qt,null,ha(De(o),u=>(D(),U(Ct,ga({class:"channel-menu-item",key:u.id},u,{clickable:"",to:{name:"channel",params:{id:u.id}}}),{default:g(()=>[m(tt,{avatar:""},{default:g(()=>[u.id==="chnSystem"?(D(),U(st,{key:0,name:"hive"})):(D(),U(st,{key:1,name:u.realmId==="rlm-public"?"public":"chat"},null,8,["name"]))]),_:2},1024),m(tt,null,{default:g(()=>[m(Ze,{lines:"1"},{default:g(()=>[M(Je(u.name),1)]),_:2},1024),u.caption?(D(),U(Ze,{key:0,caption:""},{default:g(()=>[M(Je(u.caption),1)]),_:2},1024)):ve("",!0)]),_:2},1024),m(tt,null,{default:g(()=>[m(Q,{rel:"edit",flat:"",dense:"",icon:"edit","aria-label":"Edit",onClick:d=>h(d,u)},null,8,["onClick"]),u.id!=="chnSystem"?(D(),U(Q,{key:0,rel:"delete",flat:"",dense:"",icon:"delete","aria-label":"Delete",onClick:d=>f(d,u)},null,8,["onClick"])):ve("",!0)]),_:2},1024),m(Ea,{"touch-position":"","context-menu":"",onShow:i[0]||(i[0]=d=>d.preventDefault()&&d.stopPropagation())},{default:g(()=>[m(Q,{rel:"edit",flat:"",icon:"edit","aria-label":"Edit",onClick:d=>h(d,u)},null,8,["onClick"]),m(Q,{rel:"delete",flat:"",round:"",icon:"delete","aria-label":"Delete",onClick:d=>f(d,u)},null,8,["onClick"])]),_:2},1024)]),_:2},1040,["to"]))),128))]),_:1}),m(ue),m(et,{class:"q-pb-sm",dense:""},{default:g(()=>[m(Ct,null,{default:g(()=>[I("div",Pn,[m(En)]),m(ln,{ref_key:"$newChannel",ref:s},null,512)]),_:1})]),_:1})]),_:1},8,["modelValue"]),m(Ra,null,{default:g(()=>[m(_)]),_:1})]),_:1})}}};export{Qn as default};
